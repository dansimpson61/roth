/* Minimal Tufte-inspired styling: high data-ink ratio, generous whitespace */
:root {
  --font-body: system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
  --ink-light: #555;
  --ink-muted: #777;
  --accent: #1d5fa7;
  --bg: #ffffff;
}
html { font-size: 15px; }
body { font-family: var(--font-body); line-height: 1.35; margin: 2.5rem auto 4rem; max-width: 880px; padding: 0 1rem; background: var(--bg); color: #111; }
h1 { font-weight: 600; font-size: 1.9rem; margin: 0 0 .25rem; }
.subtitle { font-size: .9rem; color: var(--ink-muted); margin: 0 0 1.5rem; }
form { display: grid; grid-template-columns: repeat(auto-fit,minmax(210px,1fr)); gap: .9rem 1.2rem; align-items: start; }
.form-group { display: flex; flex-direction: column; }
label { font-size: .72rem; text-transform: uppercase; letter-spacing: .06em; color: var(--ink-light); margin-bottom: .15rem; }
input[type=number] { font-size: .85rem; padding: .35rem .4rem; border: 1px solid #ccc; border-radius: 3px; background: #fafafa; }
fieldset { grid-column: 1/-1; border: none; padding: 0; margin: .5rem 0 0; }
legend { font-size: .75rem; font-weight: 600; letter-spacing: .05em; color: var(--ink-light); margin-bottom: .25rem; }
.select-row { display: flex; gap: .75rem; align-items: flex-end; flex-wrap: wrap; }
select { font-size: .8rem; padding: .35rem .4rem; }
button { background: var(--accent); color: #fff; border: none; padding: .55rem .9rem; font-size: .8rem; border-radius: 4px; cursor: pointer; box-shadow: 0 1px 2px rgba(0,0,0,.08); }
button:hover { filter: brightness(1.05); }
#metrics { margin: 2rem 0 1.5rem; display: grid; grid-template-columns: repeat(auto-fit,minmax(180px,1fr)); gap: 1rem; }
.metric { padding: .6rem .8rem; background: #f6f7f8; border-radius: 4px; position: relative; }
.metric h3 { font-size: .65rem; letter-spacing: .07em; font-weight: 600; color: var(--ink-light); margin: 0 0 .35rem; }
.metric .value { font-size: 1.05rem; font-weight: 500; }
pre#output { background: #fdfdfd; border: 1px solid #eee; padding: .75rem 1rem; font-size: .65rem; line-height: 1.2; overflow: auto; max-height: 340px; }
.json-disclosure { margin-top:1rem; }
#toggle-json { background:none; color:var(--accent); border:none; font-size:.65rem; cursor:pointer; padding:0 .25rem 0 0; }
#toggle-json:hover { text-decoration:underline; }
.disclosure { grid-column: 1/-1; margin-top: .5rem; }
.details-toggle { background: none; border: none; font-size: .7rem; color: var(--accent); padding: 0; cursor: pointer; }
.hidden { display: none !important; }
footer { margin-top: 2.5rem; font-size: .55rem; color: var(--ink-muted); max-width: 60ch; }
/* Chart */
#chart-wrapper { margin: 1.5rem 0 1.25rem; position:relative; }
#chart-header { display:flex; align-items:center; gap:1rem; margin-bottom:.4rem; }
.chart-toggle { font-size:.6rem; letter-spacing:.05em; display:flex; gap:.5rem; align-items:center; }
#balance-chart { width:100%; height:260px; border:1px solid #eee; background:#fcfcfc; }
.series-label { font-size:.55rem; fill:#333; }
.area-trad { fill:#c7d8e6; }
.area-roth { fill:#89b3d8; }
.area-income { fill:#b4d4ef; }
.tax-line { stroke:#444; stroke-width:1; fill:none; stroke-dasharray:2 3; }
.axis { stroke:#bbb; stroke-width:0.5; }
.band-deduction { fill:#f2f8fd; fill-opacity:.85; stroke:#b9d7ea; stroke-width:.6; }
.band-bracket { fill:#e8f1f7; stroke:#d3e3ec; stroke-width:.45; }
.band-label { font-size:.48rem; fill:#335; }
.stack-base { fill:#b9d8ef; fill-opacity:.78; }
.stack-ss { fill:#8fc0e3; fill-opacity:.78; }
.stack-rmd { fill:#63a6d6; fill-opacity:.78; }
.stack-conv { fill:#327fbf; fill-opacity:.78; }
#chart-legend { display:flex; flex-wrap:wrap; gap:.75rem; margin:.4rem 0 .2rem .25rem; }
#chart-legend .item { display:flex; align-items:center; gap:.3rem; font-size:.55rem; color:#444; }
#chart-legend .swatch { width:12px; height:10px; border:1px solid #666; box-shadow:0 0 0 1px #ffffff66 inset; }
#chart-legend .stack-base { background:#b9d8ef; }
#chart-legend .stack-ss { background:#8fc0e3; }
#chart-legend .stack-rmd { background:#63a6d6; }
#chart-legend .stack-conv { background:#327fbf; }
#chart-legend .tax-line { background:repeating-linear-gradient(90deg,#333 0 2px,#fff 2px 4px); }
#chart-tooltip { position:absolute; pointer-events:none; background:#fffffffa; backdrop-filter:blur(2px); border:1px solid #d0d7dd; border-radius:4px; padding:.4rem .55rem; font-size:.6rem; line-height:1.15; box-shadow:0 2px 4px rgba(0,0,0,.08); display:none; max-width:180px; }
#chart-tooltip h4 { margin:0 0 .15rem; font-size:.65rem; font-weight:600; letter-spacing:.04em; }
#chart-tooltip table { border-collapse:collapse; }
#chart-tooltip td { padding:0 .25rem .15rem 0; white-space:nowrap; }
#chart-tooltip td.val { text-align:right; font-variant-numeric:tabular-nums; }
.hover-line { stroke:#222; stroke-width:.7; stroke-dasharray:3 3; opacity:.55; }
